# OpenDental Appointment Booking: Complete API Workflow Guide

Your voice agent is hitting OpenDental's strict appointment status requirements. **The "appointment must be in a booked status to be broken" error occurs because only appointments with AptStatus="Scheduled" can be broken** - not Complete, UnschedList, Broken, or Planned appointments. Your UnschedList approach sometimes works because you're directly changing status rather than using the Break function, but this bypasses OpenDental's tracking mechanisms for no-shows and cancellations. The correct workflow requires checking slot availability before every booking, using the dedicated Break endpoint for cancellations, and following specific status transitions.

OpenDental's API is designed around explicit validation workflows rather than automatic conflict prevention. The system provides validation functions that developers must call, optional restriction rules that offices configure, and visual indicators for post-booking conflicts. Understanding these patterns and the proper API call sequences is essential for building a reliable voice booking integration.

## Understanding OpenDental's appointment status architecture

OpenDental uses eight distinct appointment statuses that control what operations are permitted. **Scheduled** represents the default status for appointments on the schedule - this is the only status that can transition to Broken. **Complete** marks finished appointments and automatically converts attached procedures from Treatment Planned to Complete status. **UnschedList** removes appointments from the schedule and places them in a temporary holding area for rescheduling follow-up. **Broken** indicates cancelled or missed appointments that can optionally remain on the schedule crossed out or move to UnschedList. **Planned** represents treatment-planned appointments not yet scheduled with specific dates. **ASAP** actually functions as a Priority field value rather than a status, allowing patients to request earlier slots if available.

The confirmation status operates independently from appointment status. New appointments default to the first item in Definitions > Appt Confirmed, typically "Not Called" or similar unconfirmed status. This tracks communication workflow separately from the appointment's scheduling state.

Status transitions follow strict rules enforced by OpenDental's internal logic. Only Scheduled appointments can be broken - attempting to break Complete, Broken, UnschedList, or Planned appointments triggers the error you're encountering. Only Scheduled appointments can be set to Complete. Planned appointments must first be converted to Scheduled before they can be broken or completed. When breaking appointments, you have three options: send to UnschedList (recommended for rescheduling), leave on schedule crossed out (only with breakType specified), or copy to Pinboard for immediate rescheduling.

## How to properly check appointment availability

OpenDental provides **GET /appointments/Slots** as the primary function for checking available appointment slots. This endpoint was added in version 21.1 specifically for availability checking and returns only genuinely available time slots, not existing appointments. The function accepts five optional parameters: date for single-day searches in yyyy-MM-dd format (must be today or future), dateStart and dateEnd for inclusive date ranges, lengthMinutes to filter out slots shorter than required duration, ProvNum for specific provider (defaults to Practice Default Provider), and OpNum for specific operatory added in version 22.1.

The response returns available slots with DateTimeStart, DateTimeEnd, ProvNum, and OpNum for each opening. For example, requesting slots for February 15, 2021 with ProvNum 1 and OpNum 18 might return two slots: 8:00 AM to 10:30 AM and 1:00 PM to 3:00 PM. The API returns entire open blocks rather than suggested appointment times - if a provider has availability from 8 AM to 10:30 AM, the entire 2.5-hour block is returned, allowing you to book appointments starting at any time within that window.

GetAppointments (Appointments GET multiple) is **not designed for availability checking** despite its similar name. This function retrieves existing scheduled appointments from the database filtered by parameters like date, patient, status, operatory, or provider. It's used for viewing and managing already-scheduled appointments, not for finding open slots. Using this for availability checking requires complex logic to identify gaps between appointments and would miss blockouts, provider schedules, and other constraints.

For practices with WebSched eServices subscriptions, **GET /appointments/SlotsWebSched** provides an alternative with more restrictive logic following WebSched rules. This requires extensive office setup including Appointment Types configuration, Blockout Types, and WebSched enablement. The endpoint requires ClinicNum if clinics are enabled, defNumApptType for appointment type definitions, and isNewPatient boolean flag. This approach is more restrictive but appropriate for patient-facing scheduling interfaces where additional business rules apply.

Time slots use 5-minute increments represented by Pattern strings consisting of 'X' and '/' characters. Each character represents 5 minutes, with 'X' indicating scheduled time and '/' indicating gaps. The pattern "/XX/" represents 20 minutes (5-minute gap, 10 minutes scheduled, 5-minute gap), while "//XXXX//" represents 30 minutes. Maximum pattern length is 108 characters representing 9 hours - longer patterns are automatically trimmed.

## Preventing double-booking and handling conflicts

OpenDental employs a **hybrid approach requiring developers to perform validation** rather than automatically preventing conflicts at the API level. The system provides validation functions you must call, optional restriction rules offices configure, and visual indicators showing conflicts after they occur. This design requires careful workflow implementation to ensure clean bookings.

The mandatory validation pattern requires calling GET /appointments/Slots before POST /appointments, using the returned ProvNum, OpNum, and DateTime values exactly as provided, and never manually constructing time slots or bypassing slot validation. **The POST endpoint does not perform automatic conflict checking** - this is by design, with OpenDental expecting developers to validate availability first. The API documentation explicitly states for multiple endpoints: "Prior to running this method, use Appointments GET Slots to get the specific timeslots available."

Appointment Rules provide the primary mechanism for preventing provider double-booking. Configured in Setup > Appointments > Appointment Rules, these procedure-specific rules prevent double-booking provider time for designated procedure codes. When an Appointment Rule exists and someone attempts to double-book that provider time, users receive "Not allowed to double book: [Rule Description]" errors. However, rules only apply to provider time - non-provider time can overlap regardless of rules. Rules are opt-in and procedure-specific - if no rules are defined for a procedure, the system allows double-booking.

Three types of conflicts must be handled separately. Provider conflicts occur when the same provider has multiple appointments at the same time, detected through Appointment Rules (hard conflicts with error messages) or Provider Time Bars showing diagonal lines (soft conflicts with visual indicators only). Operatory conflicts occur when multiple appointments are scheduled in the same operatory simultaneously, controlled by the "Appointments allow overlap" preference. Patient conflicts are enforced at the database level - patients cannot have multiple appointments at the same time, though this isn't explicitly documented in the API.

The proper validation workflow includes four steps. First, query available slots with GET /appointments/Slots, always specifying both ProvNum and OpNum for accurate results. Second, present only the returned slot options to users or systems, never manually constructing time slots. Third, create appointments using exact slot data including the ProvNum, OpNum, and DateTime from the Slots response. Fourth, verify creation success by checking for 201 Created status versus 400 BadRequest and handling any error messages.

For high-confidence validation, implement additional checks. Query existing appointments for the target date and operatory with GET /appointments?date=yyyy-MM-dd&Op=X to see what's already scheduled. Check the patient's existing appointments with GET /appointments?PatNum=X&date=yyyy-MM-dd to prevent patient-level conflicts. Verify provider schedules with GET /schedules?date=yyyy-MM-dd&ProvNum=X to confirm the provider is actually working during the target time.

## Breaking versus canceling appointments correctly

The terms "breaking" and "canceling" have specific meanings in OpenDental with different API approaches. **Breaking an appointment** sets the status to Broken and tracks it as a missed or cancelled appointment needing documentation. The appointment can remain on the schedule crossed out or be sent to UnschedList. This workflow is used for tracking patient no-shows and late cancellations, optionally attaching procedure codes D9986 (Missed) or D9987 (Cancelled) with associated fees, and creating CommLog entries if office preferences enable it.

**Unscheduling an appointment** sets the status to UnschedList, removing it from the schedule and placing it in the Unscheduled List without marking it as problematic. This approach is used when patients need to reschedule but timing is uncertain, with no penalty procedures attached. The key distinction: breaking tracks problematic appointments in reports and can charge fees, while unscheduling simply removes appointments from the schedule for later rescheduling.

The proper API function for breaking appointments is **PUT /appointments/{AptNum}/Break** with one required parameter: sendToUnscheduledList set to "true" (recommended, sends to Unscheduled List for rescheduling) or "false" (leaves appointment on schedule crossed out). The optional breakType parameter accepts "Missed" to add procedure D9986, "Cancelled" to add procedure D9987, or omit it entirely for cancellations with adequate notice. The breakType functionality requires office preferences set to something other than "None" for broken appointment procedure types.

An example break request would PUT to /appointments/5/Break with body {"sendToUnscheduledList": "true"} for a simple cancellation, or {"sendToUnscheduledList": "false", "breakType": "Missed"} for a no-show that should remain visible on the schedule. The API documentation explicitly recommends using specialized methods rather than the general PUT endpoint: "It is rare to use this method. There would be complex issues involved. It is recommended to instead use Appointments PUT Note, PUT Confirm, and PUT Break."

Common errors occur when requirements aren't met. The "appointment must be in Scheduled status to be broken" error happens when attempting to break appointments with any status other than Scheduled - check current status first with GET /appointments/{AptNum}, and if not Scheduled, either change to Scheduled first or use direct status change if workflow allows. The breakType parameter not working indicates office preferences don't allow broken appointment procedures - offices must configure Setup > Appointments > Appts Preferences to set "Broken appointment procedure type" to "Missed", "Cancelled", or "Both". Attempting to break already-broken appointments fails - to reschedule these, use PUT to update Status back to Scheduled along with new AptDateTime and Op values.

For your voice agent specifically, when a patient calls to cancel with adequate notice, use PUT /appointments/{AptNum} to set AptStatus="UnschedList" directly rather than using the Break function. This avoids tracking it as a problem appointment. For no-shows or late cancellations, always use PUT /appointments/{AptNum}/Break with sendToUnscheduledList="true" to properly track the broken appointment and enable future rescheduling.

## Complete workflows for every appointment operation

Creating new appointments requires a strict five-step sequence. First, verify the patient exists with GET /patients/{PatNum} to ensure valid PatNum. Second, check slot availability with GET /appointments/Slots specifying date range, ProvNum, and OpNum with lengthMinutes if needed. Third, receive and validate the slots response - if empty, no availability exists for those parameters. Fourth, create the appointment with POST /appointments including required fields PatNum, Op, and AptDateTime, plus recommended fields AptStatus (defaults to "Scheduled"), Pattern (defaults to "/XX/" for 20 minutes), Confirmed (defaults to first definition in category), Note, ProvNum, ProvHyg, ClinicNum, IsHygiene, IsNewPatient, Priority, AppointmentTypeNum, and colorOverride. Fifth, handle the response - 201 Created indicates success with the new AptNum returned, while 400 BadRequest indicates validation failure.

A complete example POST request would look like: {"PatNum": 21, "Op": 6, "AptDateTime": "2020-07-31 09:00:00", "Pattern": "/XX/", "ProvNum": 3, "Note": "Patient requested morning appointment", "IsNewPatient": "false", "Priority": "Normal"}. The AptDateTime format must be "yyyy-MM-dd HH:mm:ss" exactly, and the Pattern must use only 'X' and '/' characters with maximum 108 characters for 9 hours.

Canceling and rescheduling follows different paths depending on circumstances. For cancellations, first verify the appointment exists with GET /appointments/{AptNum}, then break it with PUT /appointments/{AptNum}/Break setting sendToUnscheduledList to "true", optionally add a communication log with POST /commlogs documenting the patient's call, and optionally send confirmation through the office's integrated system. The break call must include the appointment number in the URL and the sendToUnscheduledList boolean in the body.

For rescheduling broken appointments, the workflow differs. First get available slots with GET /appointments/Slots for the new desired date range and provider, then update the broken appointment with PUT /appointments/{AptNum} setting AptStatus to "Scheduled", AptDateTime to the new slot time, and Op to the new operatory. The API documentation states: "To reschedule a broken appointment, use Appointments PUT (update) to update the Status, AptDateTime, and Op of the broken appointment."

Rescheduling currently-scheduled appointments uses the simpler approach of PUT /appointments/{AptNum} with just AptDateTime and/or Op updates without changing status, since the appointment is already Scheduled. Always check availability with GET Slots first to prevent creating conflicts. Add a Note field to document the reason for rescheduling.

For planned appointments, the workflow uses a dedicated endpoint. First retrieve planned appointments with GET /chartmodules/{PatNum}/PlannedAppts or GET /appointments?PatNum=X&AptStatus=Planned, then get available slots with GET /appointments/Slots, finally schedule the planned appointment with POST /appointments/SchedulePlanned including AptNum of the planned appointment, AptDateTime from the selected slot, ProvNum and Op from the slot, Confirmed status, and Note. This creates a new scheduled appointment and automatically transfers procedures from the planned appointment without deleting the original planned appointment.

## Critical API patterns and integration best practices

The authentication format uses the header "Authorization: ODFHIR {DeveloperKey}/{CustomerKey}" with developer keys obtained by contacting vendor.relations@opendental.com. For testing, OpenDental provides test credentials that work against their demo database. The API endpoint is https://api.opendental.com/api/v1 for the Remote API mode.

OpenDental offers three API modes with different performance characteristics. The Remote API routes through OpenDental HQ servers at api.opendental.com, requires eConnector running at the customer site, and involves 10 hops in the data flow chain with throttling of 1 request per second (or 5 seconds for ApiReadAll permission). The Local API runs on individual workstations as part of opendental.exe on port 30222, provides fastest performance with no throttling, and automatically launches on OpenDental startup. The API Service runs continuously on the customer's database server on port 30223, installed via OpenDentalAPIService.exe, and offers best performance for production environments with no throttling. The recommended approach uses a cascade strategy: attempt Local or Service API first, fall back to Remote API if unavailable.

Rate limiting applies only to Remote API mode. With ApiReadAll permission only, the limit is 1 request per 5 seconds including execution time. With any other permission, the limit is 1 request per second. Throttling is per customer key, not per developer key. Local API and API Service modes have no throttling, making them significantly better for voice agent use cases requiring rapid response times during live calls.

For voice agent integrations specifically, several patterns prove effective. Implement patient lookup before booking with GET /patients?LName=Smith to search by name, GET /patients?BirthDate=1985-03-15 to search by birthdate, or POST /patients to create new patients if not found. Use the Subscriptions API with POST /subscriptions to register for real-time appointment change notifications - subscribe to the "appointment" table with webhook URL to receive updates when appointments change. Cache slot queries with 60-second TTL maximum to improve performance during interactive conversations, but always re-check immediately before final booking.

Error handling requires careful attention to status codes and messages. A 400 BadRequest with "Not allowed to double book" indicates an Appointment Rule violation - the slot is no longer available or never was available for that procedure. Empty slots responses mean no availability exists - expand the date range, change provider/operatory, or offer alternative dates. A 404 NotFound indicates invalid provider, operatory, or patient reference - verify all IDs before creating appointments. A 401 Unauthorized means invalid API credentials - check developer key and customer key are correct and properly formatted.

Version compatibility matters for API features. Customer databases must be at or above the version when each API method was added. The OpNum parameter for slots was added in version 22.1, DateTimeArrived/Seated/Dismissed timestamps were added in version 25.2.10, and AppointmentTypeNum was added in version 22.1. Check the customer's OpenDental version before using newer features, and implement graceful degradation for older versions.

Several successful voice AI integrations provide reference patterns. Bola AI offers an official partnership for voice periodontal charting integrated natively with OpenDental. GetHelpdesk.AI provides 24/7 AI dental answering service with full OpenDental integration for call handling and appointment scheduling. Arini AI implements an AI receptionist with 100% HIPAA compliance, 24/7 availability, and emergency appointment booking capabilities. Retell AI Platform partners offer HIPAA/SOC2/GDPR compliant voice agents with webhook integrations, achieving 67% improvement in appointment show-up rates and 40% operational cost reduction through automated booking and confirmation.

The most critical workflow requirement for your voice agent: **always call GET /appointments/Slots before POST /appointments**, use returned slot parameters exactly as provided, handle 400/404 errors gracefully with user-friendly messages, implement conflict detection before final booking, and never bypass slot validation regardless of user requests or time pressure. Failure to follow this workflow results in double-bookings, since the POST endpoint does not perform automatic conflict checking.

## Fixing your current implementation issues

Your specific issues have clear solutions based on OpenDental's architecture. The "appointment must be in a booked status to be broken" error occurs because you're attempting to break appointments that aren't in Scheduled status. Before calling PUT /appointments/{AptNum}/Break, always verify the appointment status with GET /appointments/{AptNum} and check that AptStatus equals "Scheduled" exactly. If the status is Complete, UnschedList, Broken, or Planned, the Break endpoint will fail - use PUT /appointments/{AptNum} to change status to Scheduled first, or use direct status change to UnschedList if breaking isn't necessary for your workflow.

The UnschedList approach working sometimes indicates you're directly changing status rather than using the Break function. This bypasses OpenDental's tracking mechanisms but is actually acceptable for cancellations with adequate notice. Use PUT /appointments/{AptNum} with body {"AptStatus": "UnschedList"} for good-faith cancellations where no tracking or fees are needed. Reserve the Break endpoint for no-shows and late cancellations where tracking matters and you might charge D9986 or D9987 procedure codes.

For slot availability checking, replace any custom logic or GetAppointments calls with the dedicated GET /appointments/Slots endpoint. Always include ProvNum and OpNum parameters for accurate results - omitting these can return overly broad or inaccurate availability. Set lengthMinutes to filter slots by your appointment type's typical duration. Search reasonable date ranges - the default is next 14 days if unspecified, but you can narrow or expand as needed. Store the exact DateTimeStart, DateTimeEnd, ProvNum, and OpNum from each slot response, and use these exact values when creating appointments.

To complete your workflow sequence, implement this pattern: when the patient calls to book, search for the patient with GET /patients, create if needed with POST /patients, ask for preferred dates and times, query slots with GET /appointments/Slots for those preferences, present available options from the slots response only, confirm the patient's selection, create the appointment with POST /appointments using slot data, set confirmation status with PUT /appointments/{AptNum}/Confirm to "Confirmed", and log the interaction with POST /commlogs. When patients call to cancel, verify status with GET /appointments/{AptNum}, break with PUT /appointments/{AptNum}/Break if it's a no-show or late cancellation setting sendToUnscheduledList to "true", or directly change to UnschedList status if it's adequate notice, log the communication, and acknowledge to the patient. When patients want to reschedule, first break or unschedule the existing appointment using appropriate method based on notice, then follow the new booking workflow starting with slot availability checking.

Your integration should maintain state about each appointment's current status. When an appointment is created, store that it's Scheduled. When broken, update local state to Broken. When rescheduled from Broken status, update back to Scheduled. This prevents attempting invalid operations like breaking already-broken appointments or trying to break completed appointments. Implement a status verification check before any state-changing operation - the extra GET request prevents errors and provides better user experience.

For production deployment, configure the office's Appointment Rules in Setup > Appointments > Appointment Rules for high-priority procedures that should never double-book, set up provider schedules properly in Schedule Setup, configure the "Appointments allow overlap" preference based on practice needs, and enable broken appointment procedure types if you want to charge for missed appointments. Test thoroughly against OpenDental's demo database before going live, implement comprehensive logging of all API calls and responses, monitor for common errors and implement automatic retries where appropriate, and provide clear error messages to voice agent users when conflicts occur.